<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Round 1 Quiz</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #0f172a;
  color: white;
  text-align: center;
}

.quiz-box {
  background: #111827;
  width: 500px;
  margin: 50px auto;
  padding: 20px;
  border-radius: 10px;
}

.option {
  background: #1e293b;
  margin: 10px;
  padding: 10px;
  border-radius: 8px;
  cursor: pointer;
}

.option:hover {
  background: #2563eb;
}

button {
  padding: 12px 25px;
  font-size: 16px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  background: #22c55e;
  color: black;
}
</style>
</head>

<body>

<div class="quiz-box" id="startScreen">
  <h1>Round 1</h1>
  <p>Click the button below to start the quiz</p>
  <button onclick="startQuiz()">Start Quiz</button>
</div>

<div class="quiz-box" id="quizScreen" style="display:none;">
  <h2 id="question"></h2>
  <div id="options"></div>
  <p>‚è± Time Left: <span id="time">120</span> sec</p>
</div>

<script>
/* ===== QUESTIONS ===== */
const questions = [
  {
    q: "Which data structure works on FIFO?",
    options: ["Stack", "Queue", "Tree", "Graph"],
    answer: 1
  },
  {
    q: "Which is used for recursion?",
    options: ["Queue", "Array", "Stack", "Linked List"],
    answer: 2
  },
  {
    q: "Which SQL command deletes a table?",
    options: ["DELETE", "REMOVE", "DROP", "TRUNCATE"],
    answer: 2
  }
];

let current = 0;
let score = 0;
let time = 120;
let timer;

/* ===== START QUIZ ===== */
function startQuiz() {
  document.getElementById("startScreen").style.display = "none";
  document.getElementById("quizScreen").style.display = "block";
  loadQuestion();
  startTimer();
}

/* ===== LOAD QUESTION ===== */
function loadQuestion() {
  if (current >= questions.length) {
    endQuiz();
    return;
  }

  document.getElementById("question").innerText = questions[current].q;

  const optDiv = document.getElementById("options");
  optDiv.innerHTML = "";

  questions[current].options.forEach((opt, index) => {
    const div = document.createElement("div");
    div.className = "option";
    div.innerText = opt;
    div.onclick = () => checkAnswer(index);
    optDiv.appendChild(div);
  });
}

/* ===== CHECK ANSWER ===== */
function checkAnswer(selected) {
  if (selected === questions[current].answer) {
    score++;
  }
  current++;
  loadQuestion();
}

/* ===== TIMER ===== */
function startTimer() {
  timer = setInterval(() => {
    time--;
    document.getElementById("time").innerText = time;
    if (time <= 0) {
      clearInterval(timer);
      endQuiz();
    }
  }, 1000);
}

/* ===== END QUIZ (SAVE TO GOOGLE SHEET) ===== */
function endQuiz() {

  clearInterval(timer);

  const mobile = prompt("Enter your registered mobile number");

  fetch("https://script.google.com/macros/s/AKfycbwH51Vz82mRoPrX1e_pFAwHf5L_w8I9AQx81G6q84T78cUBR9Dx820dQBR1A/exec", {
    method: "POST",
    headers: {
      "Content-Type": "application/x-www-form-urlencoded"
    },
    body: `mobile=${mobile}&score=${score}`
  });

  document.body.innerHTML = `
    <h1>Round 1 Completed</h1>
    <h2>Your Score: ${score}</h2>
    <p>Please wait for results</p>
  `;
}
</script>

</body>
</html>
